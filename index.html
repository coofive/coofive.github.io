<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Everything will be OK!">
<meta property="og:type" content="website">
<meta property="og:title" content="coofive">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="coofive">
<meta property="og:description" content="Everything will be OK!">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="coofive">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>coofive</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">coofive</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/20/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/20/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/" class="post-title-link" itemprop="url">搭建hexo博客（四）：添加插件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-12-20 13:09:53 / Modified: 16:19:43" itemprop="dateCreated datePublished" datetime="2020-12-20T13:09:53+08:00">2020-12-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index"><span itemprop="name">环境</span></a>
                </span>
            </span>

          
            <span id="/2020/12/20/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/" class="post-meta-item leancloud_visitors" data-flag-title="搭建hexo博客（四）：添加插件" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2020/12/20/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/20/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>在完整的搭建了hexo博客之后，基本功能都可以使用，这时可以添加一些自定义的插件，丰富自己的博客</p>
</blockquote>
<h3 id="主题-next"><a href="#主题-next" class="headerlink" title="主题 - next"></a>主题 - next</h3><ol>
<li><p>下载主题</p>
<p>目前用的hexo版本是 <code>5.3.0</code>，目前next主题 <code>5.0+</code> ，<code>7.0+</code> 和 <code>8.0+</code> 版本的地址分别为不同的地址，这里选用 7.8.0 release 稳定版本</p>
<blockquote>
<p>注：不同的hexo版本和next版本可能存在兼容性稳定，目前用的 <code>hexo 5.3.0</code> 和 <code>next 7.8.0</code> 版本可以正常运行</p>
</blockquote>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https://github.com/theme-next/hexo-theme-next/releases</span></span><br></pre></td></tr></table></figure></li>
<li><p>配置主题</p>
<ul>
<li><p> 将上面下载的zip包解压至 hexo 博客目录下的 <code>themes/</code> 下</p>
</li>
<li><p>将文件夹重命名 <code>next-7.8.0</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">├── themes        # 主题</span><br><span class="line">|   └── next-7.8.0    # next主题</span><br></pre></td></tr></table></figure></li>
<li><p>博客的配置文件 <code>_config.yml</code> 修改主题为 <code>next-7.8.0</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next-7.8.0</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<h3 id="评论插件-Valine"><a href="#评论插件-Valine" class="headerlink" title="评论插件 - Valine"></a>评论插件 - Valine</h3><ol>
<li><p>获取APP ID 和 APP KEY</p>
<p>需要先<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/login.html#/signin">登录</a>或<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/login.html#/signup">注册</a> <code>LeanCloud</code>, 进入<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/applist.html#/apps">控制台</a>后点击左下角<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/applist.html#/newapp">创建应用</a>，这个时候会生成 <code>app id</code> 和 <code>app key</code> </p>
</li>
<li><p>主题添加评论插件</p>
<p>因为next主题直接集成了<code>Valine</code>插件，所以只需要配置自己的 <code>app id</code> 和 <code>app key</code> 即可</p>
<blockquote>
<p>注：这里更改配置的地方为 next 主题内的 <code>_config.yml</code></p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="comment"># Your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="comment"># Your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># Mail notifier</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Just</span> <span class="string">go</span> <span class="string">go</span> <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># Gravatar style</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">language:</span> <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span> <span class="comment"># Article reading statistic</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span> <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># Whether to record the commenter IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="comment">#post_meta_order: 0</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="统计插件-leancloud-visitors"><a href="#统计插件-leancloud-visitors" class="headerlink" title="统计插件 - leancloud_visitors"></a>统计插件 - leancloud_visitors</h3><ol>
<li><p>获取APP ID 和 APP KEY</p>
<p>需要先<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/login.html#/signin">登录</a>或<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/login.html#/signup">注册</a> <code>LeanCloud</code>, 进入<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/applist.html#/apps">控制台</a>后点击左下角<a target="_blank" rel="noopener" href="https://leancloud.cn/dashboard/applist.html#/newapp">创建应用</a>，这个时候会生成 <code>app id</code> 和 <code>app key</code> </p>
</li>
<li><p>配置</p>
<p>同样因为next主题集成了相关的插件，这里只需要将<code>app id</code> 和 <code>app key</code> 添加到配置文件即可</p>
<blockquote>
<p>注：这里更改配置的地方为 next 主题内的 <code>_config.yml</code></p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show number of visitors of each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn to get AppID and AppKey.</span></span><br><span class="line"><span class="comment"># AppID and AppKey are recommended to be the same as valine&#x27;s for counter compatibility.</span></span><br><span class="line"><span class="comment"># Do not enable both `valine.visitor` and `leancloud_visitors`.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="comment"># Your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="comment"># Your leancloud application appkey</span></span><br><span class="line">  <span class="comment"># Required for apps from CN region</span></span><br><span class="line">  <span class="attr">server_url:</span> <span class="comment"># &lt;your server url&gt;</span></span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span></span><br><span class="line">  <span class="comment"># If you don&#x27;t care about security in leancloud counter and just want to use it directly</span></span><br><span class="line">  <span class="comment"># (without hexo-leancloud-counter-security plugin), set `security` to `false`.</span></span><br><span class="line">  <span class="attr">security:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><ol>
<li><p>现象：配置了next主题，无法显示 <code>categories</code> <code>tags</code> 等选择栏</p>
<p>解决：手动创建页面，并配置好<code>index.md</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;tags&quot;</span><br></pre></td></tr></table></figure>
<p>配置 <code>tags</code> 的 <code>index.md</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2020-12-19 22:38:35</span><br><span class="line">type: tags</span><br><span class="line">layout: tags</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;categories&quot;</span><br></pre></td></tr></table></figure>
<p>配置 <code>categories</code> 的 <code>index.md</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2020-12-19 22:32:35</span><br><span class="line">type: categories</span><br><span class="line">layout: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/01/20/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ACentOS-6-8%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/20/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ACentOS-6-8%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">Linux学习（一）：CentOS-6.8安装与配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-01-20 15:51:40" itemprop="dateCreated datePublished" datetime="2019-01-20T15:51:40+08:00">2019-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-20 12:36:49" itemprop="dateModified" datetime="2020-12-20T12:36:49+08:00">2020-12-20</time>
              </span>

          
            <span id="/2019/01/20/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ACentOS-6-8%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" class="post-meta-item leancloud_visitors" data-flag-title="Linux学习（一）：CentOS-6.8安装与配置" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2019/01/20/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ACentOS-6-8%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/01/20/Linux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ACentOS-6-8%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p><strong>Linux</strong> 是一种<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E5%8F%8A%E5%BC%80%E6%94%BE%E6%BA%90%E4%BB%A3%E7%A0%81%E8%BD%AF%E4%BB%B6">自由和开放源代码</a>的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%B1%BBUnix%E7%B3%BB%E7%BB%9F">类UNIX</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1">操作系统</a>。该操作系统的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%86%85%E6%A0%B8">内核</a>由<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%89%98%E7%93%A6%E5%85%B9">林纳斯·托瓦兹</a>在1991年10月5日首次发布，在加上<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BD%BF%E7%94%A8%E8%80%85%E7%A9%BA%E9%96%93">用户空间</a>的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F">应用程序</a>之后，成为Linux操作系统。</p>
</blockquote>
<p>为了便于在 <code>windows</code> 上进行 <code>Linux</code> 学习，参照前辈的教程，在 <code>windows</code> 上基于 <code>VMware</code> 或 <code>VirtualBox</code>安装Linux系统。</p>
<h3 id="Linux-环境"><a href="#Linux-环境" class="headerlink" title="Linux 环境"></a>Linux 环境</h3><ul>
<li><p>VMware Workstation</p>
<p><strong>VMware Workstation</strong> 是 <code>VMware</code> 公司销售的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%95%86%E4%B8%9A%E8%BD%AF%E4%BB%B6">商业软件</a>产品之一。该工作站软件包含一个用于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E7%89%B9%E5%B0%94">英特尔</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/X86">x86</a>兼容计算机的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E6%9C%BA">虚拟机</a>套装，其允许用户同时创建和运行多个x86虚拟机。每个虚拟机可以运行其安装的操作系统，如（但不限于）<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Microsoft_Windows">Windows</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Linux">Linux</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/BSD">BSD变生版本</a>。</p>
</li>
<li><p>VirtualBox</p>
<p>**Oracle VirtualBox **是由<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%BE%B7%E5%9C%8B">德国</a> <code>InnoTek</code> 软件公司出品的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E6%A9%9F%E5%99%A8">虚拟机</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94">软件</a>，现在则由<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%94%B2%E9%AA%A8%E6%96%87%E5%85%AC%E5%8F%B8">甲骨文公司</a>进行开发，是甲骨文公司xVM<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E5%8C%96">虚拟化</a>平台技术的一部分。它提供用户在<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/32%E4%BD%8D%E5%85%83">32位</a>或<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/64%E4%BD%8D%E5%85%83">64位</a>的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Microsoft_Windows">Windows</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Solaris">Solaris</a>及<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Linux">Linux</a> <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1">操作系统</a>上虚拟其它<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/X86">x86</a>的操作系统。</p>
</li>
</ul>
<p>为了方便移植，这里选用了 <code>VMware</code> 作为 <code>Linux</code> 学习的工具。</p>
<h3 id="Linux-下载"><a href="#Linux-下载" class="headerlink" title="Linux 下载"></a>Linux 下载</h3><ul>
<li><p>CentOS 6.8</p>
<p>从 <code>CentOS</code> 的官网获取 <code>CentOS</code> 的安装 <code>ISO</code> ：<a target="_blank" rel="noopener" href="http://isoredirect.centos.org/centos/6/isos/x86_64/">http://isoredirect.centos.org/centos/6/isos/x86_64/</a></p>
</li>
</ul>
<h3 id="Linux-安装"><a href="#Linux-安装" class="headerlink" title="Linux 安装"></a>Linux 安装</h3><ul>
<li><p>安装环境</p>
<ol>
<li><code>VMware</code> 版本： <code>15.0.0 build-10134415</code></li>
<li><code>Linux</code> 版本：<code>CentOS 6.8</code></li>
</ol>
</li>
<li><p>VMware新建Linux注意事项</p>
<ol>
<li><p>新建虚拟机时选自定义新建虚拟机</p>
<p><img src="/images/2019012002.png" alt="2019012002"></p>
</li>
<li><p>在安装客户机操作系统的选项中，选择稍后安装操作系统，然后点击下一步</p>
<p>备注：此处如果直接选择安装程序光盘映像文件 <code>iso</code> 的选项，并导入 <code>CentOS</code> 系统，<code>Vmware Workstation</code> 将会执行简易安装，并且自动配置安装 <code>CentOS</code> 时的很多参数，不利于我们自定义系统。因此建议选择为稍后安装操作系统。</p>
<p><img src="/images/2019012004.png" alt="2019012004"></p>
</li>
<li><p>在选择客户机操作系统的选项中，先将客户操作系统的大类选项中选择为Linux，再将版本中的选项选择为Centos 64位，然后点击下一步</p>
<p><img src="/images/2019012005.png" alt="2019012005"></p>
</li>
<li><p>在命名虚拟机的选项中，首先为该次创建的虚拟机命名，也可保留为默认，然后在位置选项中可以为该次创建的虚拟机在计算机硬盘中指定对应的存储路径，然后点击下一步</p>
<p><img src="/images/2019012006.png" alt="2019012006"></p>
</li>
<li><p>在处理器配置的选项中，可以为该次创建的虚拟机分配处理器的数量与每个处理器的核心数量，建议按照物理计算机的实际CPU数量或实际CPU数量的一半的去分配，指定完成后，点击下一步</p>
<p><img src="/images/2019012007.png" alt="2019012007"></p>
</li>
<li><p>在此虚拟机的内存选项中，可以为该次创建的虚拟机分配可使用的内存大小，鉴于本次安装的是Linux，此处分配2G-4G即可，分配完成后，点击下一步</p>
<p><img src="/images/2019012008.png" alt="2019012008"></p>
</li>
<li><p>选择网络类型的选项中，选择默认的NAT模式即可</p>
<p><img src="/images/2019012009.png" alt="2019012009"></p>
</li>
<li><p>在选择磁盘的选项中，选择创建新虚拟磁盘即可，然后点击下一步</p>
<p><img src="/images/2019012012.png" alt="2019012012"></p>
</li>
<li><p>在指定磁盘容量大小的选项中，首先看到最大磁盘大小这一选项，一般来说，根据建议大小调整大小即可，不要去勾选立即分配所有磁盘空间，当然根据自己的需求与硬盘容量去适当的调整大小也是可以的，然后选择将虚拟磁盘存储为单个文件的选项，最后点击下一步</p>
<p><img src="/images/2019012013.png" alt="2019012013"></p>
</li>
<li><p>在已准备好创建虚拟机的选项中，根据自己的需要点击自定义硬件，添加、修改或者删除部分需要的硬件。然后点击完成</p>
<p><img src="/images/2019012015.png" alt="2019012015"></p>
</li>
<li><p>点击编辑虚拟机设置选择相应的iso文件</p>
<p>备注：此处如果是载入Centos6.8的ISO，需要载入CentOS-6.8-x86_64-bin-DVD1.iso，对于Centos 6.8而言，会存在两个镜像，一个是CentOS-6.8-x86_64-bin-DVD1.iso，另一个是CentOS-6.8-x86_64-bin-DVD2.iso。DVD1中通常是系统和部分软件，DVD2中通常是附加软件包，如有需要，可以在安装完DVD1中的Centos6.8系统后再另行安装DVD2。</p>
<p><img src="/images/2019012016.png" alt="2019012016"></p>
</li>
<li><p>最后点击开启虚拟机</p>
</li>
</ol>
</li>
</ul>
<h4 id="Linux-系统安装注意事项"><a href="#Linux-系统安装注意事项" class="headerlink" title="Linux 系统安装注意事项"></a>Linux 系统安装注意事项</h4><ol>
<li><p>虚拟机启动后，即会自动开始引导光驱中的 <code>CetnOS6.8</code> 的 <code>ISO</code> 镜像，在 <code>CentOS6.8</code> 的引导界面上选择 <code>Install system with basic video driver</code> 即可开始安装进程</p>
<p>备注：</p>
<ul>
<li>Install or upgrade an existing system（安装或者升级一个已经存在的系统）</li>
<li>Install system with basic video driver（以基本的视频驱动程序来安装系统）</li>
<li>Rescue installed system（援救已安装的系统）</li>
<li>Boot from local drive（从本地驱动器引导）</li>
<li>Memory test（内存测试）</li>
</ul>
<p><img src="/images/2019012017.png" alt="2019012017"></p>
</li>
<li><p>在运行一段自检程序之后，将会进入 <code>CentOS6.8</code> 的安装程序，首先看到的是 <code>Media Test</code>，选择 <code>Skip</code>跳过</p>
<p>备注：</p>
<ul>
<li>其作用是为了在安装系统前检测安装介质是否存在问题，会花费较长时间。一般来说，不需要进行检测，选择跳过即可。</li>
</ul>
<p><img src="/images/2019012018.png" alt="2019012018"></p>
</li>
<li><p>其后会询问在安装进程中需要使用哪种语言，选择简体中文，键盘选美国英文键盘</p>
</li>
<li><p>选择基础存储设备安装</p>
<p><img src="/images/2019012020.png" alt="2019012020"></p>
</li>
<li><p>接上一步选项下一步之后，此处是发现刚才选定的存储设备内可能包含数据，询问是否要忽略这些数据，选择是即可，点击下一步</p>
<p>备注：</p>
<ul>
<li>此处因为是指定的空闲硬盘空间进行安装，因此可以确定没有数据，所以可以选择直接放弃所有数据，在实际操作中，还是要确认指定的存储设备是否有重要数据存在</li>
<li>勾选的意思是在不检测所有存储设备内的分区与文件系统的前提下，应用本次忽略所有数据的选项到所有的存储设备，同理，因本次是空间硬盘空间安装，可以勾选本选项</li>
</ul>
<p><img src="/images/2019012021.png" alt="2019012021"></p>
</li>
<li><p>为本台主机命名一个主机名，以便让本主机可以在网络上通过该主机名被唯一的辨识</p>
</li>
<li><p>选择时区</p>
</li>
<li><p>此处要求设置的是root密码，要求输入两次，两次必须一样，然后点击下一步</p>
<p>备注：</p>
<ul>
<li>如果root密码设置的太简单，会提示你的密码太弱小，让你更改，如果要强行使用，点击Use Anyway即可</li>
</ul>
<p><img src="/images/2019012024.png" alt="2019012024"></p>
</li>
<li><p>设置安装系统的方式</p>
<p>备注：</p>
<ul>
<li>使用所有空间：</li>
<li>替换现有 <code>Linux</code> 系统</li>
<li>缩小现有系统</li>
<li>使用剩余空间</li>
<li>创建自定义布局</li>
</ul>
<p><img src="/images/2019012025.png" alt="2019012025"></p>
</li>
<li><p>进入自定义布局页面</p>
<p>备注：</p>
<ul>
<li><p>先创建 <code>/boot</code> 分区用来存放系统内核引导文件，一个空间大小为200M，文件系统类型为ext4的分区</p>
<p><img src="/images/2019012027.png" alt="2019012027"></p>
</li>
<li><p><code>swap</code>分区（交换分区），充当虚拟内存使用，大小约为物理内存的2倍，如果内存够大，可以不配置<code>swap</code>文件系统</p>
<p><img src="/images/2019012028.png" alt="2019012028"></p>
</li>
<li><p><code>/</code>分区分配剩余其他空间，因为其他目录都是在 <code>/</code>下生成</p>
</li>
</ul>
<p><img src="/images/2019012029.png" alt="2019012029"></p>
</li>
</ol>
<p><img src="/images/2019012030.png" alt="2019012030"></p>
<ol start="11">
<li><p>在上图中分配完自定义布局后，点击下一步，会弹出格式化警告信息（Fromat Warning），告诉使用者该块磁盘上的数据将被摧毁，将按照使用者指定的布局来重新分区。点击格式化即可</p>
</li>
<li><p>此时会再弹出警告框，提示分区设置已选定，即将写入到磁盘中，所有原先在磁盘中的数据都将被删除，是否继续，点击将修改写入磁盘即可</p>
<p><img src="/images/2019012032.png" alt="2019012032"></p>
</li>
<li><p>此时会告诉你系统引导驱动器的位置被安装在何处，如果不想改变位置，可以保持默认，点击下一步继续</p>
</li>
<li><p>到可选软件包安装界面后，这里我们选 <code>Desktop</code> 类型安装</p>
</li>
</ol>
<p><img src="/images/2019012034.png" alt="2019012034"></p>
<ol start="15">
<li>然后等待进度条加载完成，点击Reboot，即可完成Centos6.8的安装</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/12/09/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AHttpClient%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/09/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AHttpClient%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">ssl双向认证（四）：HttpClient实现双向认证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-09 12:03:35" itemprop="dateCreated datePublished" datetime="2018-12-09T12:03:35+08:00">2018-12-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-19 22:10:58" itemprop="dateModified" datetime="2020-12-19T22:10:58+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span id="/2018/12/09/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AHttpClient%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" class="post-meta-item leancloud_visitors" data-flag-title="ssl双向认证（四）：HttpClient实现双向认证" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/12/09/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AHttpClient%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/12/09/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AHttpClient%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p><code>keystore</code> 和 <code>truststore</code>是 <code>JSSE</code> 中使用的两种文件。这两种文件都使用 <code>java</code> 的 <code>keytool</code> 来管理，他们的不同主要在于用途和相应用途决定的内容的不同。</p>
</blockquote>
<h4 id="keystore-和-truststore"><a href="#keystore-和-truststore" class="headerlink" title="keystore 和 truststore"></a><code>keystore</code> 和 <code>truststore</code></h4><p>这两种文件在一个SSL认证场景中，<code>keystore</code> 用于服务器认证客户端，而 <code>truststore</code> 用于客户端认证服务器。</p>
<p>比如在客户端（服务请求方）对服务器（服务提供方）发起一次 <code>HTTPS</code> 请求时，服务器需要向客户端提供认证以便客户端确认这个服务器是否可信。 这里，服务器向客户端提供的认证信息就是自身的证书和公钥，而这些信息，包括对应的私钥，服务器就是通过 <code>keystore</code> 来保存的。 当服务器提供的证书和公钥到了客户端，客户端就要生成一 个 <code>truststore</code> 文件保存这些来自服务器证书和公钥。</p>
<p>因为 <code>keystore</code> 文件既可以存储敏感信息，比如密码和私钥，也可以存储公开信息比如公钥，证书之类，所有实际上来讲，可以将 <code>keystore</code> 文件同样用做 <code>truststore</code> 文件。</p>
<h4 id="httpclient-实现双向认证"><a href="#httpclient-实现双向认证" class="headerlink" title="httpclient 实现双向认证"></a><code>httpclient</code> 实现双向认证</h4><p>由于公司给了密钥以及证书，所以直接可以用 <code>keytool</code>生成 <code>keystore</code>，由于服务器和客户端用的是一套证书，所以，生成的<code>keystore</code>既可以用来做<code>keystore</code>，也能做 <code>truststore</code>，从而实现双向认证的证书互相认证。上一篇介绍了如何生成 <code>jks</code> 文件，这里就不细说了，直接拿过来用。</p>
<p>maven import</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>设置证书的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置证书</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> SSLConnectionSocketFactory <span class="title">getSslConnectionSocketFactory</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String client_key_pass = <span class="string">&quot;changeit&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// keystore</span></span><br><span class="line">    KeyStore clientKeyStore = KeyStore.getInstance(<span class="string">&quot;JKS&quot;</span>);</span><br><span class="line">    InputStream clientKeyStoreInput = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">&quot;C:/test/keystore.jks&quot;</span>));</span><br><span class="line">    clientKeyStore.load(clientKeyStoreInput, client_key_pass.toCharArray());</span><br><span class="line"></span><br><span class="line">    SSLContext sslContext = SSLContexts.custom()</span><br><span class="line">            .loadTrustMaterial(clientKeyStore, <span class="keyword">new</span> TrustSelfSignedStrategy())   <span class="comment">// 设置truststore</span></span><br><span class="line">            .loadKeyMaterial(clientKeyStore, client_key_pass.toCharArray())     <span class="comment">// 设置keystore</span></span><br><span class="line">            .setSecureRandom(<span class="keyword">new</span> SecureRandom())</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Allow TLSv1 protocol only</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SSLConnectionSocketFactory(</span><br><span class="line">            sslContext,</span><br><span class="line">            <span class="keyword">new</span> String[]&#123;<span class="string">&quot;TLSv1.2&quot;</span>&#125;,</span><br><span class="line">            <span class="keyword">null</span>,</span><br><span class="line">            SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实例化httpclient</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例化httpClient</span></span><br><span class="line">httpClient = HttpClients.custom()</span><br><span class="line">        .setSSLSocketFactory(getSslConnectionSocketFactory())   <span class="comment">// 设置SSLSocket</span></span><br><span class="line">        .build();</span><br></pre></td></tr></table></figure>
<p>通过以上的 <code>httpclient</code> 配置，即可实现 <code>httpclient</code>双向认证。</p>
<p>在访问有些 HTTPS 站点时，你还可能会遇到下面的异常：</p>
<blockquote>
<p>javax.net.ssl.SSLHandshakeException:</p>
</blockquote>
<blockquote>
<p>sun.security.validator.ValidatorException: PKIX path building failed:</p>
</blockquote>
<blockquote>
<p>sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>
</blockquote>
<blockquote>
<p>In order to use the self-signed client certificate which was issued by a non public CA the public server certificate must be imported into a truststore.</p>
</blockquote>
<p>在之前有介绍道关于 <code>SSL</code>、<code>HTTPS</code> 的相关联性。我碰到的这个异常是因为只设置了 <code>keystore</code> 而没有设置 <code>truststore</code>。</p>
<p>之前在网上查到的资料是通过设置系统环境变量，将其添加到 <code>truststore</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;path&#x2F;to&#x2F;truststore.jks&quot;);</span><br><span class="line">System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);</span><br><span class="line">System.setProperty(&quot;javax.net.ssl.trustStoreType&quot;, &quot;JKS&quot;);</span><br></pre></td></tr></table></figure>
<p>然后发现并不管用，于是直接在初始化 <code>httpclient</code> 的时候将 <code>keystore</code>、<code>truststore</code> 设置进去：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SSLContext sslContext = SSLContexts.custom()</span><br><span class="line">            .loadTrustMaterial(clientKeyStore, <span class="keyword">new</span> TrustSelfSignedStrategy())   <span class="comment">// 设置truststore</span></span><br><span class="line">            .loadKeyMaterial(clientKeyStore, client_key_pass.toCharArray())     <span class="comment">// 设置keystore</span></span><br><span class="line">            .setSecureRandom(<span class="keyword">new</span> SecureRandom())</span><br><span class="line">            .build();</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/12/04/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81%E5%92%8C%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/04/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81%E5%92%8C%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">ssl双向认证（三）：单向认证和双向认证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-04 21:55:56" itemprop="dateCreated datePublished" datetime="2018-12-04T21:55:56+08:00">2018-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-19 22:10:58" itemprop="dateModified" datetime="2020-12-19T22:10:58+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span id="/2018/12/04/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81%E5%92%8C%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" class="post-meta-item leancloud_visitors" data-flag-title="ssl双向认证（三）：单向认证和双向认证" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/12/04/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81%E5%92%8C%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/12/04/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81%E5%92%8C%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>SSL认证是指客户端到服务器端的认证。主要用来提供对用户和服务器的认证；对传送的数据进行加密和隐藏；确保数据在传送中不被改变，即数据的完整性，现已成为该领域中全球化的标准。</p>
</blockquote>
<h4 id="HTTPS-单向认证"><a href="#HTTPS-单向认证" class="headerlink" title="HTTPS 单向认证"></a><code>HTTPS</code> 单向认证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Client -&gt; Server: ①Client Hello(随机数，支持的加密算法)</span><br><span class="line">Server --&gt; Client: ②Server Hello(随机数，选择一个client支持的算法)</span><br><span class="line">Server --&gt; Client: ②Server证书</span><br><span class="line">note left of Client: ③验证证书</span><br><span class="line">Client -&gt; Server: ④Client key Exchange(用Server公钥加密)</span><br><span class="line">Client -&gt; Server: ④Change cipher Spec(通知Server参数协商完成)</span><br><span class="line">Client -&gt; Server: ④Finish handshake(Encrypted handshake message)</span><br><span class="line">Server --&gt; Client: ⑤cipher spec + Finish handshake</span><br><span class="line">note left of Client: 开始传输</span><br><span class="line">Client -&gt; Server: ⑥开始使用协商密钥与算法进行加密通信</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>流程：</p>
<p>①    <strong><code>Client Hello</code></strong>:  <strong>客户端</strong>的浏览器向<strong>服务器</strong>传送客户端 <code>SSL</code> 协议的版本号，加密算法的种类，产生的随机数，以及其他服务器和客户端之间通讯所需要的各种讯息。</p>
<p>②    <strong><code>Server Hello</code></strong>:  <strong>服务器</strong>向<strong>客户端</strong>传送 <code>SSL</code> 协议的版本号，客户端支持的加密算法，随机数以及其他相关信息，同时服务器还将向客户端传送自己的证书。</p>
<p>③    <strong><code>验证证书</code></strong>:  <strong>客户端</strong>利用服务器传过来的信息验证服务器的合法性，服务器的合法性包括：证书是否过期，发行服务器证书的CA是否可靠，发行者证书的公钥能否正确解开服务器证书的“发行者的数字签名”，服务器证书上的域名是否和服务器的实际域名相匹配。如果合法性验证没有通过， 通讯将断开；如果合法性验证通过，将继续进行第四步。</p>
<p>④    <strong><code>Client key Exchange</code></strong>:  合法性校验通过之后，<strong>客户端</strong>计算产生随机数字<code>Pre-master</code>，并用证书公钥加密，发送给服务器。</p>
<p>​    <strong><code>Change cipher Spec</code></strong>:  <strong>客户端</strong>通知服务器后续的通信都采用协商的通信密钥和加密算法进行加密通信。</p>
<p>​    <strong><code>Encrypted handshake message</code></strong>:  <strong>客户端</strong>结合之前所有通信参数的hash值与其他相关信息生成一段数据，采用协商session secret 与算法进行加密，然后发送给服务器用于数据与握手验证。</p>
<p>⑤    <strong><code>cipher spec + Finish handshake</code></strong>:  验证通过之后，服务器接收到浏览器送过来的消息，用自己的私钥解密，获得通话密钥。<strong>服务器</strong>同样发送 <code>change_cipher_spec</code> 以告知客户端后续的通信都采用协商的密钥与算法进行加密通信。</p>
<p>⑥    开始使用协商密钥与算法进行加密通信。</p>
<h4 id="HTTPS-双向认证"><a href="#HTTPS-双向认证" class="headerlink" title="HTTPS 双向认证"></a><code>HTTPS</code> 双向认证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Client -&gt; Server: ①Client Hello(随机数，支持的加密算法)</span><br><span class="line">Server --&gt; Client: ②Server Hello(随机数，选择一个client支持的算法)</span><br><span class="line">Server --&gt; Client: ②Server证书</span><br><span class="line">note left of Client: ③验证证书</span><br><span class="line">Client -&gt; Server: ④Client key Exchange(用Server公钥加密)</span><br><span class="line">Client -&gt; Server: ④Change cipher Spec(通知Server参数协商完成)</span><br><span class="line">Client -&gt; Server: ④Finish handshake(Encrypted handshake message)</span><br><span class="line">Client -&gt; Server: ④Client证书</span><br><span class="line">note right of Server: ⑤验证证书</span><br><span class="line">Server --&gt; Client: ⑥Change cipher Spec(通知Server参数协商完成)</span><br><span class="line">Server --&gt; Client: ⑥Finish handshake(Encrypted handshake message)</span><br><span class="line"></span><br><span class="line">note left of Client: 开始传输</span><br><span class="line">Client -&gt; Server: ⑦开始使用协商密钥与算法进行加密通信</span><br></pre></td></tr></table></figure>
<p>流程：</p>
<p>①    <strong><code>Client Hello</code></strong>:  <strong>客户端</strong>的浏览器向<strong>服务器</strong>传送客户端 <code>SSL</code> 协议的版本号，加密算法的种类，产生的随机数，以及其他服务器和客户端之间通讯所需要的各种讯息。</p>
<p>②    <strong><code>Server Hello</code></strong>:  <strong>服务器</strong>向<strong>客户端</strong>传送 <code>SSL</code> 协议的版本号，客户端支持的加密算法，随机数以及其他相关信息，同时服务器还将向客户端传送自己的证书。</p>
<p>③    <strong><code>验证证书</code></strong>:  <strong>客户端</strong>利用服务器传过来的信息验证服务器的合法性，服务器的合法性包括：证书是否过期，发行服务器证书的CA是否可靠，发行者证书的公钥能否正确解开服务器证书的“发行者的数字签名”，服务器证书上的域名是否和服务器的实际域名相匹配。如果合法性验证没有通过， 通讯将断开；如果合法性验证通过，将继续进行第四步。</p>
<p>④    <strong><code>Client key Exchange</code></strong>:  合法性校验通过之后，<strong>客户端</strong>计算产生随机数字<code>Pre-master</code>，并用证书公钥加密，发送给服务器。</p>
<p>​    <strong><code>Change cipher Spec</code></strong>:  <strong>客户端</strong>通知服务器后续的通信都采用协商的通信密钥和加密算法进行加密通信。</p>
<p>​    <strong><code>Encrypted handshake message</code></strong>:  <strong>客户端</strong>结合之前所有通信参数的hash值与其他相关信息生成一段数据，采用协商session secret 与算法进行加密，然后发送给服务器用于数据与握手验证。</p>
<p>​    <strong><code>Client证书</code></strong>:  <strong>服务器</strong>要求客户发送客户自己的证书，客户端发送自己证书。</p>
<p>⑤    <strong><code>验证证书</code></strong>:  <strong>服务器</strong>验证客户的证书，如果没有通过验证，拒绝连接；如果通过验证，服务器获得用户的公钥。 服务器接收到浏览器送过来的消息，用自己的私钥解密，获得通话密钥。</p>
<p>⑥    <strong><code>Change cipher Spec</code></strong>:  <strong>服务器</strong>同样发送 <code>change_cipher_spec</code> 以告知客户端后续的通信都采用协商的密钥与算法进行加密通信。</p>
<p>⑦    开始使用协商密钥与算法进行加密通信。</p>
<p>参考：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://edison0663.iteye.com/blog/996526">ssl双向认证和单向认证原理</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ustccw/article/details/76691248">SSL/TLS 双向认证(一) – SSL/TLS工作原理</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%AF%81%E4%B9%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%AF%81%E4%B9%A6/" class="post-title-link" itemprop="url">ssl双向认证（二）：证书</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-27 21:59:49" itemprop="dateCreated datePublished" datetime="2018-11-27T21:59:49+08:00">2018-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-19 22:10:58" itemprop="dateModified" datetime="2020-12-19T22:10:58+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span id="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%AF%81%E4%B9%A6/" class="post-meta-item leancloud_visitors" data-flag-title="ssl双向认证（二）：证书" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%AF%81%E4%B9%A6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%AF%81%E4%B9%A6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="证书"><a href="#证书" class="headerlink" title="证书"></a>证书</h2><blockquote>
<p>数字证书（或简称证书）是在 <code>Internet</code> 上唯一地标识人员和资源的电子文件。证书使两个实体之间能够进行安全、保密的通信。证书有很多种类型，例如个人证书（由个人使用）和服务器证书（用于通过安全套接字层  <code>SSL</code>  技术在服务器和客户机之间建立安全会话）。</p>
</blockquote>
<h3 id="证书介绍"><a href="#证书介绍" class="headerlink" title="证书介绍"></a>证书介绍</h3><h4 id="SSL-简介"><a href="#SSL-简介" class="headerlink" title="SSL 简介"></a><code>SSL</code> 简介</h4><p><strong><code>wiki</code></strong> : <strong>传输层安全性协议</strong>（<code>Transport Layer Security</code>，简称 <code>TLS</code>），前身<strong>安全套接层</strong>（<code>Secure Sockets Layer</code>，简称 <code>SSL</code>），是一种安全协议，目的是为互联网通信提供安全及数据完整性保障。</p>
<p><strong><code>Https</code></strong> : <strong>超文本传输安全协议</strong>（<code>Hypertext Transfer Protocol Secure</code>，简称 <code>HTTPS</code>，常称为<code>HTTP over TLS</code>，<code>HTTP over SSL</code>），是一种透过计算机网络进行安全通信的传输协议。<code>HTTPS</code> 经由 <code>HTTP</code> 进行通信，但利用 <code>SSL/TLS</code> 来加密数据包。<code>HTTPS</code> 开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。简而言之，<code>HTTPS</code> 就是带加密的 <code>HTTP</code> 协议。</p>
<p><strong><code>OpenSSL</code></strong> : 一个开放源代码的软件库包，应用程序可以使用这个包来进行安全通信，避免窃听，同时确认另一端连线者的身份。其主要库是 <code>C语言</code> 所写成，实现了基本的加密功能，实现了 <code>SSL/TLS</code> 协议。也就是说 <code>OpenSSL</code> 是 <code>SSL/TLS</code> 的一种实现。</p>
<h4 id="证书标准"><a href="#证书标准" class="headerlink" title="证书标准"></a>证书标准</h4><p><strong><code>X.509</code></strong> : 它是密码学里公钥证书的格式标准。<code>X.509</code> 证书里含有<strong>公钥</strong>、<strong>身份信息</strong>（比如网络主机名，组织的名称或个体名称等）和<strong>签名信息</strong>（可以是证书签发机构CA的签名，也可以是自签名）。</p>
<h4 id="证书文件扩展名"><a href="#证书文件扩展名" class="headerlink" title="证书文件扩展名"></a>证书文件扩展名</h4><p><code>X.509</code> 有多种常用的扩展名。不过其中的一些还用于其它用途，就是说具有这个扩展名的文件可能并不是证书，比如说可能只是保存了私钥。</p>
<ul>
<li><p><strong><code>.pem</code></strong> :   <code> Privacy Enhanced Mai</code> ，<code>DER</code> 编码的证书再进行 <code>BASE64</code> 编码的数据存放在 <code>----BEGIN CERTIFICATE---- </code>和 <code>----END CERTIFICATE----</code>之中。</p>
<p>查看 <code>pem</code> 格式证书信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -in own.pem -text -noout</span><br></pre></td></tr></table></figure>
<p><code>Apache</code> 和 <code>*NIX</code>服务器偏向于使用这种编码格式。</p>
</li>
<li><p><strong><code>.cer</code>、<code>.crt</code>、<code>.der</code></strong> : <code>Distinguished Encoding Rules</code>， 通常是 <code>DER</code> 二进制格式。</p>
<p>查看 <code>der</code> 格式证书信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -in own.der -inform der -text -noout</span><br></pre></td></tr></table></figure>
<p><code>Java</code> 和 <code>Windows</code> 服务器偏向于使用这种编码格式。</p>
</li>
<li><p><strong><code>.key</code></strong> : 通常用来存放一个公钥或者私钥，并非<code>X.509</code>证书，编码同样的，可能是<code>PEM</code>，也可能是<code>DER</code>。</p>
</li>
<li><p><strong><code>PFX/P12</code></strong> : <code>predecessor of PKCS#12</code> ，对 <code>*nix</code> 服务器来说，一般 <code>CRT</code> 和 <code>KEY</code> 是分开放在不同文件夹中，但 <code>Windows</code> 的 <code>IIS</code> 则将它们存放在一个 <code>PFX</code> 文件中，通常会有一个<strong>提取密码</strong>。</p>
</li>
<li><p><strong><code>JKS</code></strong> :  <code>Java Key Storage</code> ，利用Java的<code>keytool</code>工具可以将 <code>PFX</code> 转为 <code>JKS</code>，供 <code>Java</code> 调用。</p>
</li>
</ul>
<p>上面只是对自己常用的证书后缀的一个简单解释，具体可参照 <code>维基百科</code>。</p>
<h4 id="证书转换"><a href="#证书转换" class="headerlink" title="证书转换"></a>证书转换</h4><blockquote>
<p>Java自带的 <code>keytool</code> 工具是个密钥和证书管理工具。它使用户能够管理自己的公钥/私钥对及相关证书，用于（通过数字签名）自我认证（用户向别的用户/服务认证自己）或数据完整性以及认证服务。它还允许用户储存他们的通信对等者的公钥（以证书形式）。</p>
</blockquote>
<p>由于业务需要，需要 <code>java</code> 实现 <code>https</code> 双向认证，需要使用 <code>keytool</code> 和 <code>openssl</code> 将 <code>pem</code> 证书转换成 <code>jks</code> 证书。</p>
<p>文件列表：</p>
<ol>
<li><code>own.pem</code>: <code>BASE64</code> 编码的证书</li>
<li><code>per.key</code>: 密钥</li>
</ol>
<p>生成<code>JKS</code>证书：</p>
<ol>
<li><p>生成 <code>pk12</code> 密钥文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -export -in own.pem -inkey per.key -out test.pk12 -name test</span><br></pre></td></tr></table></figure></li>
<li><p>将 <code>test.pk12</code> 生成 <code>test.jks</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -deststorepass changeit -destkeypass changeit -destkeystore test.jks -srckeystore test.pk12 -srcstoretype PKCS12 -srcstorepass changeit -alias test</span><br></pre></td></tr></table></figure></li>
<li><p>除了生成 <code>keystore</code> 之外，还可以生成 <code>truststore</code>。</p>
</li>
</ol>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://chenguangqi.github.io/blog/keystore.html">从pem文件生成keystore和truststore文件</a></li>
<li><a target="_blank" rel="noopener" href="http://sky425509.iteye.com/blog/1994891http://sky425509.iteye.com/blog/1994891">证书转换：pem 转keystore</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AHttpClient%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AHttpClient%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">ssl双向认证（一）：HttpClient的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-27 20:52:31" itemprop="dateCreated datePublished" datetime="2018-11-27T20:52:31+08:00">2018-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-19 22:10:58" itemprop="dateModified" datetime="2020-12-19T22:10:58+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span id="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AHttpClient%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-meta-item leancloud_visitors" data-flag-title="ssl双向认证（一）：HttpClient的使用" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AHttpClient%E7%9A%84%E4%BD%BF%E7%94%A8/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/27/ssl%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AHttpClient%E7%9A%84%E4%BD%BF%E7%94%A8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>HttpClient 是 Apache Jakarta Common 下的子项目，用来提供高效的、最新的、功能丰富的支持 HTTP 协议的客户端编程工具包。它相比传统的 HttpURLConnection，增加了易用性和灵活性，它不仅让客户端发送 HTTP 请求变得更容易，而且也方便了开发人员测试接口（基于 HTTP 协议的），即提高了开发的效率，也方便提高代码的健壮性。</p>
</blockquote>
<p>这里对<code>HttpClient</code>做简单的使用，目的是利用它来解决双向认证的问题。</p>
<h3 id="使用-HttpClient-发送-HTTP-请求"><a href="#使用-HttpClient-发送-HTTP-请求" class="headerlink" title="使用 HttpClient 发送 HTTP 请求"></a>使用 HttpClient 发送 HTTP 请求</h3><h4 id="GET请求-amp-POST请求"><a href="#GET请求-amp-POST请求" class="headerlink" title="GET请求&amp;POST请求"></a>GET请求&amp;POST请求</h4><p><code>HttpClient</code>对每一种<code>Http</code>方法都准备了一个类，<code>Get</code>请求使用<code>HttpGet</code>类，<code>Post</code>请求使用<code>HttpPost</code>类</p>
<blockquote>
<p>模拟Http Get请求</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// httpclient 4.3版本后使用HttpClients来实例化</span></span><br><span class="line">CloseableHttpClient httpclient = HttpClients.createDefault();</span><br><span class="line">HttpGet request = <span class="keyword">new</span> HttpGet(url);</span><br><span class="line">CloseableHttpResponse response = httpclient.execute(request);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// read response</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>模拟Http Post请求</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String parameter = <span class="string">&quot;key=value&quot;</span>;</span><br><span class="line">HttpPost request = <span class="keyword">new</span> HttpPost(url);</span><br><span class="line">request.setEntity(</span><br><span class="line">    <span class="keyword">new</span> StringEntity(parameter, ContentType.create(<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>读取响应</p>
</blockquote>
<p><code>HttpClient</code>的输入是一个<code>Entity</code>，输出也是一个<code>Entity</code>。对于<code>Entity</code>，<code>HttpClient</code>提供给我们一个工具类<code>EntityUtils</code>，使用它可以很方便的将其转换为字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpResponse response = httpclient.execute(request);</span><br><span class="line">String responseBody = EntityUtils.toString(response.getEntity());</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99hexo-github-gitee/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99hexo-github-gitee/" class="post-title-link" itemprop="url">搭建hexo博客（三）：同时部署多个托管网站hexo+github+gitee</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-25 16:46:48" itemprop="dateCreated datePublished" datetime="2018-11-25T16:46:48+08:00">2018-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-20 12:51:12" itemprop="dateModified" datetime="2020-12-20T12:51:12+08:00">2020-12-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index"><span itemprop="name">环境</span></a>
                </span>
            </span>

          
            <span id="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99hexo-github-gitee/" class="post-meta-item leancloud_visitors" data-flag-title="搭建hexo博客（三）：同时部署多个托管网站hexo+github+gitee" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99hexo-github-gitee/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AA%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99hexo-github-gitee/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>上一节介绍了如何发布静态网页到github，但考虑到国内网速原因，想同时时间github和gitee多个托管网站，方便访问</p>
</blockquote>
<h3 id="同时发布到github和gitee"><a href="#同时发布到github和gitee" class="headerlink" title="同时发布到github和gitee"></a>同时发布到github和gitee</h3><p>上一篇已经介绍如何发布到<code>github</code>，这里先介绍新建<code>gitee</code>项目</p>
<ol>
<li><p>在<code>gitee</code>上创建名为<code>xxx</code>的项目（与github有所区别），<code>xxx</code>为自己的<code>gitee</code>用户名</p>
</li>
<li><p>设置项目的类型为<code>JavaScript</code></p>
</li>
<li><p>配置<code>deploy</code>多个源,官方的格式是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 官方的格式</span><br><span class="line"># deploy:</span><br><span class="line">#   type: git</span><br><span class="line">#   message: [message]</span><br><span class="line">#   repo:</span><br><span class="line">#     github: &lt;repository url&gt;,[branch]</span><br><span class="line">#     gitcafe: &lt;repository url&gt;,[branch]</span><br><span class="line"></span><br><span class="line"># 我的配置</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: </span><br><span class="line">    github: git@github.com:coofive&#x2F;coofive.github.io.git,master</span><br><span class="line">    gitee: git@gitee.com:coofive&#x2F;coofive.git,master</span><br></pre></td></tr></table></figure>
<h3 id="将hexo提交到github，实现多台电脑使用"><a href="#将hexo提交到github，实现多台电脑使用" class="headerlink" title="将hexo提交到github，实现多台电脑使用"></a>将hexo提交到github，实现多台电脑使用</h3></li>
<li><p>在本地创建分支<code>hexo</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b hexo</span><br></pre></td></tr></table></figure></li>
<li><p>查看分支状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li>
<li><p>本地<code>commit</code>后，提交本地分支到远程分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;hexo博客&quot;</span><br><span class="line">git remote add origin git@github.com:liu253928127&#x2F;liu253928127.github.io.git</span><br><span class="line">git push -u origin hexo</span><br></pre></td></tr></table></figure></li>
<li><p>有可能发布后样式加载不出来，一般是css路径访问不对，所以在gitee创建项目的时候按照固定格式来最好</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BAhexo%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BAhexo%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">搭建hexo博客（二）：搭建hexo环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-25 11:23:10" itemprop="dateCreated datePublished" datetime="2018-11-25T11:23:10+08:00">2018-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-20 12:46:51" itemprop="dateModified" datetime="2020-12-20T12:46:51+08:00">2020-12-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index"><span itemprop="name">环境</span></a>
                </span>
            </span>

          
            <span id="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BAhexo%E7%8E%AF%E5%A2%83/" class="post-meta-item leancloud_visitors" data-flag-title="搭建hexo博客（二）：搭建hexo环境" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BAhexo%E7%8E%AF%E5%A2%83/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%90%AD%E5%BB%BAhexo%E7%8E%AF%E5%A2%83/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><ul>
<li><p>下载node.js并安装（官网下载安装）,默认会安装npm。</p>
</li>
<li><p>下载安装git（官网下载安装）。</p>
</li>
</ul>
<h4 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h4><ol>
<li><p>hexo官网（<a target="_blank" rel="noopener" href="https://hexo.io)/">https://hexo.io）</a></p>
</li>
<li><p>设置npm镜像源为淘宝镜像，从国外镜像源下载很容易失败</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br></pre></td></tr></table></figure></li>
<li><p>hexo安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>hexo的基本使用可查看官网文档或者官方示例<code>hello-world</code></p>
</li>
</ol>
<h4 id="本地搭建hexo静态博客"><a href="#本地搭建hexo静态博客" class="headerlink" title="本地搭建hexo静态博客"></a>本地搭建hexo静态博客</h4><ol>
<li><p>新建一个文件夹，如<code>blog</code></p>
</li>
<li><p>进入该文件夹内，右键运行<code>cmd</code>，输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li>
<li><p>初始化后，文件夹的目录如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── .deploy       # 需要部署的文件</span><br><span class="line">├── node_modules  # Hexo插件</span><br><span class="line">├── public        # 生成的静态网页文件</span><br><span class="line">├── scaffolds     # 模板</span><br><span class="line">├── source        # 博客正文和其他源文件等都应该放在这里</span><br><span class="line">|   ├── _drafts   # 草稿</span><br><span class="line">|   └── _posts    # 文章</span><br><span class="line">├── themes        # 主题</span><br><span class="line">├── _config.yml   # 全局配置文件</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure></li>
<li><p>加载node依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></li>
<li><p>本地运行，即可访问<a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a> hexo首页</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<h4 id="发布到github"><a href="#发布到github" class="headerlink" title="发布到github"></a>发布到github</h4></li>
<li><p>在<code>github</code>上创建名为<code>xxx.github.io</code>的项目，<code>xxx</code>为自己的<code>github</code>用户名</p>
</li>
<li><p>打开本地的<code>blog</code>文件夹项目内的<code>_config.yml</code>的配置文件，将其中的<code>type</code>设置为<code>git</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:coofive&#x2F;coofive.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></li>
<li><p>安装<code>deploy</code>插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git –save</span><br></pre></td></tr></table></figure></li>
<li><p>本地生成静态文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure></li>
<li><p>将本地静态文件推送至<code>github</code>,或者生成和部署一行命令<code>hexo g --d</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure></li>
<li><p>访问<code>http://xxx.github.io</code>就能看到刚刚本地部署的静态网页</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="coofive">
      <meta itemprop="description" content="Everything will be OK!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="coofive">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/" class="post-title-link" itemprop="url">搭建hexo博客（一）：写在前面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-25 10:55:28" itemprop="dateCreated datePublished" datetime="2018-11-25T10:55:28+08:00">2018-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-12-19 22:10:58" itemprop="dateModified" datetime="2020-12-19T22:10:58+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index"><span itemprop="name">环境</span></a>
                </span>
            </span>

          
            <span id="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/" class="post-meta-item leancloud_visitors" data-flag-title="搭建hexo博客（一）：写在前面" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/25/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>最近想写一些博客，但又觉得自己搭建个人网站比较费时费力，偶然在看技术文档的时候，看到别人用hexo搭建博客，而且能直接部署在github上，省时省力，页面也很简洁。再加上自己忘东西忘得快，所以想整理自己的知识库，以便以后回顾！</p>
</blockquote>
<h4 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h4><p>&emsp;&emsp;每次遇到不懂的技术问题，或者为了解决某一个问题，会去google搜索大量的资料，大部分问题最终都能得到解决，在这个过程中我发现很多人的技术博客写的相当不错的，然后就收藏了大量的博客，等过一段时间再去看的时候，发现已经忘的差不多了，之所以忘得这么快，是因为这些东西并没有更好的整合消化掉。</p>
<p>&emsp;&emsp;自己也有做笔记的习惯，一般来说写的东西只是针对某一个问题而写的解决方案，更多的是作为一个字典查询，并没有做进一步的总结。</p>
<h4 id="知识体系"><a href="#知识体系" class="headerlink" title="知识体系"></a>知识体系</h4><p>&emsp;&emsp;网络日益发达的今天，每天接触的信息量很大，然而自己真正吸收并且转化为内需的并没有多少。</p>
<p>&emsp;&emsp;每天接收很多微信公众号文章推送，看完后分享，点赞，收藏（收藏可能下次就不会再看了），觉得这个文章很好，可是说不出个所以然。</p>
<p>&emsp;&emsp;感觉学的东西很多，但是又难以形成系统性的见解。或者让自己说出来，却说不出来。</p>
<p>&emsp;&emsp;东西太多，信息量太大，怎么转化对自己更有用的东西。</p>
<p>&emsp;&emsp;在网上看到大佬的见解就是，<strong>建立自己的知识体系！</strong></p>
<h4 id="我的知识体系"><a href="#我的知识体系" class="headerlink" title="我的知识体系"></a>我的知识体系</h4><p>&emsp;&emsp; 关于知识体系目前处于空想阶段，以后贴出详细框架。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="coofive"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">coofive</p>
  <div class="site-description" itemprop="description">Everything will be OK!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">coofive</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'xp4HJfSVXUlCGNzPpDeLTjjU-gzGzoHsz',
      appKey     : 'ntYnjYy0CE17kyFPfhXTss7M',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
